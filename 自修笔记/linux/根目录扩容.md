## cenots7 根目录扩容

### 总体思路
> vmvare上进行硬盘扩展。进入系统划分分区，指定文件系统格式，挂载，移动可以移动的<br/>大文件目录到挂载的文件目录，删除原来的目录，更名挂载目录名称为原目录名称，保持各个<br/>文件路径不变。设置开机自动挂载。

### 代码执行
```
此处以搬移 /var 目录为例
df -h 查看磁盘挂载
fdisk -l   查看当前可以分区的磁盘以及空间大小

fdisk /dev/sda
m
n
e      主分区只能有四个，不够的话可以直接把所有空间划分成扩展分区。再在扩展分区上划分逻辑分区

w

在上述扩展分区基础上划分出 /dev/sda5,/dev/sda6 后面只用到/dev/sda5.
reboot 后才能生效

mkfs -t ext4 /dev/sda5   制作成ext4的文件系统

mkdir /var1
mount /dev/sda5 /var1
mv /var/* /var1
rm -rf /var   会有东西删不掉。问题也不是太大，毕竟有些运行的进程是要在/var中实时产生数据的。所以/var 目录还会存在。没关系，挂载新磁盘到 /var 目录就会遮蔽原来的文件。  实际上不建议这么干，（只是笔者挑战恢复系统的高难度所以这么玩，建议玩之前先快照系统。）还是移动可以移动的目录比较靠谱。可以通过du -sh /usr/*来找到/usr
目录下哪些文件占用空间大，并且可以被搬移。不影响操作系统的重启

umount /dev/sda5 -f  此时会提示你不能卸载，磁盘忙
fuser -m /dev/sda5

kill -9 上述产看到的进程号

umount /dev/sda5   系统直接会挂掉，网络也会断掉，重启到救援模式，在救援模式中把/dev/sda5挂载到 /var 下。这样系统就可以正常使用/dev/sda5作为/var来使用了

救援模式下：
vi /etc/fstab   开机自动挂载
/dev/sda5 /var ext4 defaults 0 0

reboot

正常进入系统后查看此时的根目录使用率下降了
df -h
```